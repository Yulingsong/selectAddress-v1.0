# selectAddress-v1.0
webç§»åŠ¨ç«¯åœ°å€é€‰æ‹©æ§ä»¶æœ€ç®€å•æœ€ç²—ç³™ç‰ˆæœ¬ï¼›

&#160;&#160;&#160;&#160;å¥½ä¹…éƒ½æ²¡æœ‰å†™ä¸œè¥¿äº†ï¼Œç°åœ¨å¹²çš„æ´»éƒ½æ˜¯é‡å¤å’Œç®€å•çš„æ´»ï¼Œèƒ½æ€»ç»“å‡ºæ¥çš„ä¸œè¥¿è¿˜æ˜¯ä¸å¤ªå¤šã€‚

&#160;&#160;&#160;&#160;ç›®å‰åšç”µå•†å¹³å°ï¼Œå…¶ä¸­ç”¨åˆ°é€‰æ‹©åœ°å€çš„æ§ä»¶ï¼Œä¸è¿‡ä¸æ˜¯è‡ªå·±å†™çš„ï¼Œæœ€è¿‘èŠ±æ—¶é—´é‡æ–°è‡ªå·±åšä¸€ä¸ªï¼Œç›®å‰å°±å…ˆå§åŠŸèƒ½æ ·å¼ï¼ŒåŠŸèƒ½å®Œæˆç¬¬ä¸€ç‰ˆï¼Œä¹‹åå†è¿›è¡Œä¼˜åŒ–å’Œå‡çº§ï¼Œæœ€ç»ˆåšæˆç»„ä»¶æˆ–è€…æ˜¯æ’ä»¶å½¢å¼ï¼Œè°ƒç”¨åªéœ€è¦å‡ è¡Œä»£ç å»å®Œæˆï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯åè¯äº†ï¼Œç›®å‰æ˜¾ç¤ºå®ŒæˆåŸºæœ¬çš„æ ·å­å’ŒåŠŸèƒ½ã€‚è¿™ä¸€ç¯‡æ–‡ç« å°±å½“åšå†™ä¸œè¥¿çš„ä¸€ä¸ªç¬”è®°ï¼Œè®°å½•ä¸€ä¸ªè¿‡ç¨‹ã€‚

&#160;&#160;&#160;&#160;å…ˆæ”¾ä¸Šå‡ºæ¥çš„æ•ˆæœ
![æˆæœgif](https://upload-images.jianshu.io/upload_images/1062695-499ce8d2bb413753.gif?imageMogr2/auto-orient/strip)

&#160;&#160;&#160;&#160;çœ‹æ•ˆæœå›¾æŒºç®€å•çš„ï¼Œå› ä¸ºæ‡’ã€‚å°±ç”¨äº†jqueryåŠ jsï¼Œæ–¹æ³•ä»€ä¹ˆçš„ä¹Ÿæ²¡è€ƒè™‘æ€§èƒ½å•¥çš„ï¼Œå°±åˆæ­¥å…ˆåšä¸€ä¸ªå‡ºæ¥ã€‚åé¢å†æ…¢æ…¢ä¸€æ­¥æ­¥ä¼˜åŒ–ã€‚

&#160;&#160;&#160;&#160;ä¸æ„¿æ„å¾€ä¸‹çœ‹çš„æœ‰å…´è¶£çš„å¯ä»¥ç›´æ¥çœ‹è¿™é‡Œ [githubd selectAddress-v1.0åœ°å€](https://github.com/Yulingsong/selectAddress-v1.0)

&#160;&#160;&#160;&#160;æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥ç•™è¨€è·Ÿæˆ‘è®¨è®ºï¼Œè¿™ä¸ªåŠŸèƒ½ä¸æ˜¯å¾ˆå¤æ‚ï¼Œåªæ˜¯ä½œä¸ºç²—ç³™ç‰ˆå°±æ²¡æœ‰è€ƒè™‘å¾ˆå¤šã€‚

# ç¬¬ä¸€æ­¥ï¼šæ„æ€åŠŸèƒ½æ ·å­ï¼Œå…ˆæœ‰æ¦‚å¿µï¼

&#160;&#160;&#160;&#160;é¦–å…ˆè‡³å°‘å¾—æœ‰æƒ³æ³•ï¼Œåšæˆä»€ä¹ˆæ ·å­ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œè¦æ˜¯ä¼šç‚¹è®¾è®¡ï¼Œå¯ä»¥è‡ªå·±å…ˆåšä¸ªå¤§æ¦‚çš„å›¾æˆ–è€…åŸå‹ï¼Œæ—¢ç„¶ä¹‹åè¦åšæˆç»„ä»¶ï¼Œé¦–å…ˆé¡µé¢ä¸Šå°±å¾—æœ‰ä¸ªæŒ‰é’®ï¼Œç„¶åå¼¹å‡ºé€‰æ‹©åœ°å€çš„å¼¹æ¡†ï¼Œé¡µé¢ä¸Šå¾—æœ‰ä¸€ä¸ªæ˜¾ç¤ºé€‰æ‹©å®Œåœ°å€çš„æ ‡ç­¾ã€‚
&#160;&#160;&#160;&#160;å¼¹æ¡†å‡ºæ¥ä¹‹åï¼Œå¾—æœ‰å‡ ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯é¡¶éƒ¨æ ‡é¢˜ï¼Œå‰å‰æŒ‰é’®ç”¨æ¥éšè—ï¼Œæ¥ä¸‹æ¥æ˜¯æ¯çº§é€‰æ‹©å®Œçš„åœ°å€æ˜¾ç¤ºåœ¨ä¸­é—´ï¼Œç„¶åå°±æ˜¯ä¸‹é¢çš„æ¯çº§åœ°å€åˆ—è¡¨ï¼Œå¹¶ä¸”åˆ—è¡¨ä¸­è‹¥æœ‰é€‰ä¸­çš„åœ°å€åˆ™æ ‡çº¢ï¼Œè¿™äº›éƒ½æ˜¯æœ€åŸºæœ¬çš„ã€‚
&#160;&#160;&#160;&#160;æˆ‘è¿™è¾¹åšçš„åœ°å€ç›®å‰åªæœ‰å››çº§åœ°å€ï¼Œä¸ä¼šæœ‰æ›´æ·±å±‚æ¬¡çš„åœ°å€ï¼Œæ‰€ä»¥åªæœ‰å››åˆ—ã€‚æ„æ€å¥½äº†ï¼Œå¤§æ¦‚æ ·å­å°±æ˜¯ä¸‹å›¾ã€‚
![æœªå¼¹å‡ºé€‰æ‹©æ¡†](https://upload-images.jianshu.io/upload_images/1062695-a13343faebfa4e38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![å¼¹å‡ºé€‰æ‹©æ¡†](https://upload-images.jianshu.io/upload_images/1062695-32de268d9640bb78.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

# ç¬¬äºŒæ­¥ï¼šæ„æ€å®Œä¹‹åå°±æ˜¯æ„é€ é¡µé¢

&#160;&#160;&#160;&#160;æ„é€ é¡µé¢ç®—æ˜¯æœ€ç®€å•çš„éƒ¨åˆ†äº†ï¼Œå°±æ˜¯å†™htmlï¼Œcssäº†ã€‚å†™æˆä¸Šå›¾çš„æ ·å­ã€‚

&#160;&#160;&#160;&#160;å› ä¸ºå››çº§åœ°å€åˆ—è¡¨è€ƒè™‘åˆ°å¤šæ¬¡åˆ‡æ¢ç•™æœ‰ç¼“å­˜çš„é—®é¢˜ï¼Œæ²¡æœ‰åšæˆæ¯åˆ‡æ¢ä¸€æ¬¡å°±è¯·æ±‚ä¸€æ¬¡ï¼Œè€Œæ˜¯åšæˆå››ä¸ªåˆ—è¡¨ï¼Œé€šè¿‡éšè—æ˜¾ç¤ºçš„æ–¹å¼æ¥æ›´æ–¹ä¾¿çš„æ“ä½œã€‚

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" href="address.css">
    <script src="jquery-3.2.1.min.js"></script>
</head>
<body>
<div class="btn" onclick="show()">ç‚¹å‡»é€‰æ‹©åœ°å€</div>

<div class="show_address" id="product_address_show" onclick="show()">åŒ—äº¬å¸‚,åŒ—äº¬å¸‚,æœé˜³åŒº,æœå¤–è¡—é“</div>

<div id="yls_address_choose" style="display: none">
    <div class="yls_address_bg" onclick="hide()"></div>
    <div class="yls_address_main">
        <div class="yls_address_pop_top">
            <div class="yls_address_pop_title">è¯·é€‰æ‹©åœ°å€</div>
            <div class="yls_address_pop_cancel" onclick="hide()"></div>
        </div>
        <div class="yls_address_pop_main">
            <div class="yls_address_product">
                <div class="yls_address_select" id="yls_address_select">
                    <div class="yls_address_top_address jdshop_alignment_middle">
                        <div id="yls_top_address_1">è¯·é€‰æ‹©</div>
                        <div id="yls_top_address_2"></div>
                        <div id="yls_top_address_3"></div>
                        <div id="yls_top_address_4"></div>
                    </div>
                    <div class="yls_address" id="yls_address_1"></div>
                    <div class="yls_address" id="yls_address_2"></div>
                    <div class="yls_address" id="yls_address_3"></div>
                    <div class="yls_address" id="yls_address_4"></div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>

```

&#160;&#160;&#160;&#160;è¿™ä¸ªhtmlè¿˜æ˜¯ä¸€ç›®äº†ç„¶çš„ï¼Œå¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯cssæ ·å¼ã€‚

```
body, html {
    -webkit-user-select: none;
    user-select: none
}
html {
    -webkit-text-size-adjust: 100%
}
body {
    line-height: 1.6;
    background-color: #f5f5f9;
    color: #4a4a4a;
    font-size: 14px;
    font-family: Arial, 'å¾®è½¯é›…é»‘', Helvetica Neue, Helvetica, sans-serif;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch
}
* {
    margin: 0;
    padding: 0
}
a img {
    border: 0
}
a {
    text-decoration: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-appearance: none
}
@font-face {
    font-weight: 400;
    font-style: normal;
    font-size: 14px;
    font-family: Arial, 'å¾®è½¯é›…é»‘', Helvetica Neue, Helvetica, sans-serif
}
input, textarea {
    border: 0;
    outline: 0;
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
    font-size: inherit;
    color: inherit
}

/*ç‚¹å‡»é€‰æ‹©æŒ‰é’®*/
.btn{
    margin: 0 auto;
    width: calc(50%);
    height: 30px;
    margin-top: 100px;
    background-color: lightcyan;
    line-height: 30px;
    text-align: center;
    font-size: 14px;
}
.alignment_middle{
    -webkit-box-align: center;
    -webkit-align-items: center;
    align-items: center;
    -webkit-box-pack: start;
    -webkit-justify-content: flex-start;
    justify-content: flex-start;
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
}
/*æ˜¾ç¤ºæ–‡å­—*/
.show_address{
    margin: 0 auto;
    margin-top: 10px;
    width: 80%;
    height: 30px;
    background-color: #fff;
    text-align: center;
    line-height: 30px;
    font-size: 14px;
}

/*èƒŒæ™¯*/
.yls_address_bg {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: #000;
    z-index: 500;
    opacity: .3;
    -webkit-transition: opacity .3s;
    transition: opacity .3s;
    touch-action: none
}
/*ä¸»å¼¹æ¡†*/
.yls_address_main {
    position: fixed;
    left: 0;
    width: 100%;
    bottom: 0;
    background: #fff;
    border-radius: 10px 10px 0 0;
    box-shadow: 0 0 3px #e9e9e9;
    -webkit-transform: translate3d(0, 120%, 0);
    transform: translate3d(0, 120%, 0);
    -webkit-transition: -webkit-transform .3s;
    transition: -webkit-transform .3s;
    transition: transform .3s;
    transition: transform .3s, -webkit-transform .3s;
    z-index: 1001;
    transform: translate3d(0, 0, 0);
}
.yls_address_pop_top {
    text-align: center;
    height: 50px;
    margin-bottom: 5px;
}
.yls_address_pop_title {
    height: 100%;
    line-height: 50px;
}
.yls_address_pop_cancel {
    position: absolute;
    right: 0;
    top: 0;
    width: 50px;
    height: 50px;
}
.yls_address_pop_cancel::before, .yls_address_pop_cancel::after {
    content: '';
    width: 16px;
    height: 1px;
    background: #000;
    display: block;
    position: absolute;
    right: 10px;
    top: 25px;
}
.yls_address_pop_cancel::before {
    transform: rotate(45deg); /*è¿›è¡Œæ—‹è½¬*/
}
.yls_address_pop_cancel::after {
    transform: rotate(-45deg);
}
.yls_address_pop_main {

}
.yls_address_product{

}
.yls_address_select{
    height: calc(60vh);
    width: 100%;
    position: relative;
    overflow: hidden;
}
.yls_address_top_address{
    font-size: 12px;
    height: 35px;
    overflow: hidden;
    border-bottom: 1px solid #ddd;
}
.yls_address_top_address>div{
    padding: 5px 5px;
    margin: 0 5px;
    white-space: nowrap;
}
.yls_address_top_address>div.show{
    color: #c91623;
    border-bottom: #c91623 1px solid;
}
.yls_address{
    position: absolute;
    left: 0;
    top: 45px;
    overflow: auto;
    width: 100%;
    height: calc(60vh - 35px);
    -webkit-transform: translate3d(-100%,0,0);
    transform: translate3d(-100%,0,0);
    -webkit-transition: -webkit-transform .3s .2s;
    transition: -webkit-transform .3s .2s;
    transition: transform .3s .2s;
    transition: transform .3s .2s,-webkit-transform .3s .2s;
}
.yls_address p{
    padding: 8px 10px;
    font-size: 14px;
}
.yls_address p.p_show {
    position: relative;
    color: #c91623;
}
.yls_address.show {
    -webkit-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
}

```

&#160;&#160;&#160;&#160;cssä¸ŠåŠéƒ¨åˆ†æ˜¯ä¸€äº›åŸºæœ¬çš„åˆå§‹åŒ–æµè§ˆå™¨æ ·å¼ï¼Œä¸‹é¢éƒ¨åˆ†å°±æ˜¯åœ°å€é€‰æ‹©çš„æ ·å¼ï¼Œç›®å‰è¿˜æ²¡åŠ å…¥åŠ¨æ€æ•ˆæœï¼Œä¹‹åä¼˜åŒ–éƒ¨åˆ†è€ƒè™‘åšè¿›å»ã€‚ä¸è¿‡è¿™éƒ¨åˆ†çš„æ ·å¼å®Œå…¨å¯ä»¥è‡ªå·±æŒ‰ç…§è‡ªå·±çš„å–œå¥½åšï¼Œæƒ³åšæˆä»€ä¹ˆæ ·å­å°±åšæˆä»€ä¹ˆæ ·å­çš„ã€‚

# ç¬¬ä¸‰æ­¥ ï¼šé€»è¾‘éƒ¨åˆ†

&#160;&#160;&#160;&#160;è¿™ä¸ªéƒ¨åˆ†ç®—æ˜¯æœ€é‡è¦çš„ï¼Œä¸è¿‡åœ¨æ­¤é‡ç”³ä¸€éï¼Œæˆ‘åšçš„åªæ˜¯ç²—ç³™çš„ç‰ˆæœ¬ï¼Œé€»è¾‘éƒ¨åˆ†æ˜¯æ²¡æœ‰ç»è¿‡ä»»ä½•ä¼˜åŒ–çš„ï¼Œè¿™ä¸ªå¤§å®¶å¯ä»¥æŒ‰ç…§è‡ªå·±ä¼˜åŒ–çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ï¼ŒåæœŸæˆ‘ä¼šåšæˆæ’ä»¶å½¢å¼å†å†™ä¸€ç¯‡ã€‚ğŸ˜‚å¸Œæœ›çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„å¤§å®¶ä¸è¦å˜²ç¬‘æˆ‘å†™çš„ç²—ç³™ï¼Œæ¯•ç«Ÿæˆ‘å†™è¿™ä¸ªä¹Ÿåªæ˜¯ç»™æ–°æ‰‹çœ‹çœ‹ï¼Œä¸è¦å«Œå¼ƒã€‚

### 1.åšåŸºæœ¬çš„å˜é‡å£°æ˜å·¥ä½œ

```
  /*èµ‹åˆå§‹å€¼*/
    var startId = [1804,1805,1829,1831];
    var startName = ['åŒ—äº¬å¸‚','åŒ—äº¬å¸‚','æœé˜³åŒº','æœå¤–è¡—é“'];

    //æœ€ç»ˆè·å–åˆ°çš„å€¼
    var returnStartId = [];
    var returnStartName = [];
```

### 2.åšå¼¹å‡ºå¼¹æ¡†çš„å¼¹å‡ºéšè—æ–¹æ³•

```
/*æ˜¾ç¤ºåœ°å€é€‰æ‹©ï¼Œéšè—åœ°å€é€‰æ‹©*/
    function show() {
        document.getElementById("yls_address_choose").style.display="";//æ˜¾ç¤º
        var url = 'http://*********/address/areas?areaId=';//è¿™è¾¹å†™ä½ è¯·æ±‚æ¥å£çš„url
        initAddress(url,startId,startName);//åˆå§‹åŒ–å·¥ä½œçš„æ–¹æ³•
    }

    /*éšè—åœ°å€é€‰æ‹©*/
    function hide() {
    //ç‚¹å‡»éšè—çš„æ—¶å€™å¾ªç¯å°†åˆ—è¡¨æ‰€æœ‰çš„showæ ·å¼å»é™¤ï¼Œé‡æ–°æ·»åŠ åˆ°æœ€åä¸€åˆ—ä¸Š
        for(var i = 1;i < 5;i++){
            var ad = 'yls_top_address_' + i;
            var adid = 'yls_address_' + i;
            $("#"+ad).removeClass('show');
            $("#"+adid).removeClass('show');
            $("#"+ad).show();
            $("#"+adid).show();
        }
        document.getElementById("yls_address_choose").style.display="none";//æ˜¾ç¤º
        //ç‚¹å‡»éšè—äº†ï¼Œå°±æŠŠæœ€ç»ˆå€¼è¿˜åŸæˆåˆå§‹å€¼
        returnStartId = startId;
        returnStartName = startName;
    }
```

### 3.åšå¼¹å‡ºå¼¹æ¡†çš„åˆå§‹åŒ–å·¥ä½œ

```
 //åˆå§‹åŒ–æ–¹æ³•
    function initAddress(url,startId,startName) {
        //å°†æˆ‘ä»¬æœ€åéœ€è¦è·å–çš„å€¼åˆå§‹åŒ–æˆåˆå§‹å€¼
        returnStartId = startId;
        returnStartName = startName;
        //åˆå§‹åŒ–è¯·æ±‚areaid=0çš„æ•°æ®ï¼Œæˆ‘ç”¨çš„æ¥å£areaid=0çš„æ—¶å€™æ˜¯è¯·æ±‚çœçº§åœ°å€
        request(url,0,1);
    }

     //åˆå§‹åŒ–è¯·æ±‚æ•°æ®éƒ¨åˆ†ï¼Œ
    //thisNum ä¸ºareaidå˜åŒ–æ•°å€¼ urlæ˜¯è¯·æ±‚url, addressNumæ˜¯æ¯ä¸ªaddressæ˜¯ç¬¬å‡ ä¸ª
    function request(url,thisNum,addressNum){
        var addressUrl = url+ thisNum;
        $.ajax({
            type: 'get',
            url: addressUrl,
            dataType: "json",
            success: function (res) {
                //æ— å¸¸è§„é”™è¯¯ï¼Œæ ¹ç»dataæ•°æ®åšå…·ä½“çš„ä¸šåŠ¡åˆ¤æ–­æ˜¾ç¤º
                console.log(res.result);
                //åˆå§‹åŒ–çš„æ¸²æŸ“html
                setHtml(res.result,thisNum,addressNum);
                //å¾ªç¯è¯·æ±‚ä¸‹çº§åœ°å€
                if(addressNum < startId.length){
                    request(url,startId[addressNum-1],addressNum+1);
                    addressNum += 1;
                }
            },
            error: function erryFunction(err) {
                //ç½‘ç»œè¯·æ±‚é”™è¯¯
                console.log(err);
                console.log('è¯»å–å¤±è´¥')
            }
        });
    }

    //åˆå§‹åŒ–æ¸²æŸ“é¡µé¢
    function setHtml(data,thisNum,addressNum) {
        var addressId = 'yls_address_' + addressNum;
        var topAddress = 'yls_top_address_' + addressNum;
        if(addressNum == startId.length){
            $("#"+addressId).addClass('show');
            $("#"+topAddress).addClass('show');
        }
        $("#"+topAddress).text(startName[addressNum-1]);

        //åˆå§‹åŒ–ä¹‹åé€‰ä¸­çš„åœ°å€é¡¶éƒ¨tabè¿›è¡Œæ·»åŠ ç‚¹å‡»æ–¹æ³•ï¼Œæ¯æ¬¡ç‚¹å‡»ä¼šåšä»€ä¹ˆäº‹æƒ…
        document.getElementById(topAddress).addEventListener("click",function () {
            var a = parseInt(topAddress.substr(topAddress.length-1,1));
            console.log(a);
            for(var i = 1;i < 5;i++){
                var ad = 'yls_top_address_' + i;
                var adid = 'yls_address_' + i;
                if(i != a){
                    $("#"+ad).removeClass('show');
                    $("#"+adid).removeClass('show');
                    if(i > a){
                        $("#"+ad).hide();
                    }
                }else{
                    $("#"+ad).addClass('show');
                    $("#"+adid).addClass('show');
                }
            }

            //tabä¸Šé€‰ä¸­åœ°å€ç‚¹å‡»çš„æ—¶å€™ï¼Œæœ€ç»ˆé€‰æ‹©åœ°å€æ•°ç»„æ•°æ®ä¹Ÿè¦ç›¸åº”çš„å˜åŒ–
            returnStartId = returnStartId.slice(0,addressNum);
            returnStartName = returnStartName.slice(0,addressNum);
           
        },false);
        $("#"+addressId).empty();//æ¸…ç©ºå½“å‰åˆ—è¡¨çš„html
        var html = '';
        //æ‹¼æ¥htmlï¼Œä¸ºåœ°å€åˆ—è¡¨ä¸­æ¯ä¸€ä¸ªåœ°å€æ·»åŠ ç‚¹å‡»æ–¹æ³•
        if(data){
            for(var i = 0;i < data.length;i++){
                if(startName[addressNum-1] == data[i].name){
                    html += '<p class="p_show" id="add_'+data[i].areaId+'" onclick="chooseDetail('+data[i].areaId+','+addressNum+',&quot;'+data[i].name+'&quot;)">'+data[i].name+'</p>';
                }else{
                    html += '<p id="add_'+data[i].areaId+'" onclick="chooseDetail('+data[i].areaId+','+addressNum+',&quot;'+data[i].name+'&quot;)">'+data[i].name+'</p>';
                }
            }
        }
        //æ·»åŠ htmlåˆ°åˆ—è¡¨ä¸Šæ¸²æŸ“é¡µé¢
        $("#"+addressId).append(html);
    }

```

### 4.æ¯æ¬¡ç‚¹é€‰åœ°å€ä¹‹åçš„å…·ä½“é€»è¾‘

```
     //ç‚¹å‡»åˆ—è¡¨ä¸­è¯¦ç»†åœ°å€çš„æ–¹æ³•
    function chooseDetail(areaId,addressNum,name) {
        var url = 'http://******/address/areas?areaId=';
        var adid = 'add_'+areaId;
        var adid1 = 'yls_address_' + addressNum;
        //é€‰ä¸­çš„æ•°æ®åŠ ä¸Šæ ‡çº¢æ˜¾ç¤º
        $("#"+adid1+'>p').removeClass('p_show');
        $("#"+adid).addClass('p_show');

        //ç‚¹å‡»å…·ä½“åœ°å€ä¹‹åï¼Œå°†æœ€ç»ˆé€‰æ‹©åœ°å€æ•°ç»„ä¸­ç›¸åº”ä½ç½®çš„æ•°æ®æ›¿æ¢æ‰
        returnStartId[addressNum-1] = areaId;
        returnStartName[addressNum-1] = name;
        
        //åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬å››çº§åœ°å€ï¼Œå¦‚æœæ˜¯ç¬¬å››çº§åœ°å€ï¼ŒæŠŠè·å–åˆ°çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œå¹¶ä¸”éšè—å¼¹æ¡†
        //å¦‚æœæ˜¯ç¬¬å››çº§åœ°å€ï¼Œå‘é€è¯·æ±‚è·å–ä¸‹ä¸€çº§çš„æ•°æ®è¿›è¡Œæ¸²æŸ“é¡µé¢
        if(addressNum == 4){
            var topAddress1 = 'yls_top_address_' + addressNum;
            $("#"+topAddress1).text(name);
            $("#product_address_show").text(returnStartName);
            hide();
        }else{
            newrequest(url,areaId,addressNum,name);
        }
    }


    //ç‚¹å‡»åˆ—è¡¨é‡Œå…·ä½“åœ°å€ï¼Œå‘é€æ–°çš„è¯·æ±‚è·å–ä¸‹ä¸€çº§æ•°æ®
    //thisNum ä¸ºareaidå˜åŒ–æ•°å€¼ urlæ˜¯è¯·æ±‚url, addressNumæ˜¯æ¯ä¸ªaddressæ˜¯ç¬¬å‡ ä¸ªï¼Œnameæ˜¯ä½ é€‰æ‹©çš„åœ°å€å…·ä½“åç§°
    function newrequest(url,thisNum,addressNum,name){
        var addressUrl = url+ thisNum;
        $.ajax({
            type: 'get',
            url: addressUrl,
            dataType: "json",
            success: function (res) {
                //æ— å¸¸è§„é”™è¯¯ï¼Œæ ¹ç»dataæ•°æ®åšå…·ä½“çš„ä¸šåŠ¡åˆ¤æ–­æ˜¾ç¤º
                console.log(res.result);
                //è·å–åˆ°æ•°æ®ä¹‹åæ¸²æŸ“ä¸‹ä¸€çº§åˆ—è¡¨
                setHtml2(res.result,thisNum,addressNum,name);
            },
            error: function erryFunction(err) {
                //ç½‘ç»œè¯·æ±‚é”™è¯¯
                console.log(err);
                console.log('è¯»å–å¤±è´¥')
            }
        });

    }

    //é€‰æ‹©è¯¦ç»†åœ°å€è¯·æ±‚è·å–æ•°æ®ä¹‹åæ¸²æŸ“æ–¹æ³•
    function setHtml2(data,thisNum,addressNum,name) {
        //è·å–åˆ°ç›¸åº”çš„div
        var adid1 = 'yls_address_' + addressNum;
        var adid2 = 'yls_address_' + (addressNum+1);
        var topAddress1 = 'yls_top_address_' + addressNum;
        var topAddress2 = 'yls_top_address_' + (addressNum+1);

        //æ¸…ç©ºç›¸åº”çš„ä¸‹ä¸€çº§divå’Œä¸‹ä¸€çº§tabä¸Šé€‰ä¸­çš„åœ°å€ï¼Œå¡«å…¥æ–°çš„æ•°æ®
        $("#"+topAddress2).empty();
        $("#"+adid2).empty();
        $("#"+topAddress2).addClass('show');
        $("#"+topAddress2).show();
        $("#"+topAddress1).removeClass('show');
        $("#"+adid2).addClass('show');
        $("#"+adid1).removeClass('show');
        $("#"+topAddress2).text('è¯·é€‰æ‹©');
        $("#"+topAddress1).text(name);
        var html = '';
        if(data){
            //æ‹¼æ¥htmlï¼Œå¹¶ä¸”æ·»åŠ ä¸Šæ–°çš„è¯¦ç»†åœ°å€é€‰æ‹©æ–¹æ³•
            for(var i = 0;i < data.length;i++){
                html += '<p id="add_'+data[i].areaId+'" onclick="chooseDetail('+data[i].areaId+','+(addressNum+1)+',&quot;'+data[i].name+'&quot;)">'+data[i].name+'</p>';
            }
        }
        $("#"+adid2).append(html);
    }

```

&#160;&#160;&#160;&#160;ä»¥ä¸Šä¸‰æ­¥å°±å®Œæˆäº†åœ°å€é€‰æ‹©ç²—ç³™ç‰ˆçš„æ„é€ ï¼Œå…¶ä¸­ç”¨æ¥è¯·æ±‚æ•°æ®çš„æ–¹æ³•å†™äº†ä¸¤ä¸ªï¼Œæ‹¼æ¥htmlæ¸²æŸ“é¡µé¢çš„æ–¹æ³•ä¹Ÿå†™äº†ä¸¤ä¸ªï¼Œè¿™äº›æ˜¯æœ‰ç‚¹å†—ä½™çš„ï¼Œè¿™ä¸ªéƒ¨åˆ†ä¹‹åå¯ä»¥åˆæˆä¸€ä¸ªã€‚
&#160;&#160;&#160;&#160;ç›®å‰ä¼˜åŒ–çš„æ„æ€æ˜¯æœ‰ï¼Œä¸è¿‡è¿˜æ²¡æ¥å¾—åŠå®æ–½ï¼Œå¾—æ‰¾æ—¶é—´åšä¸€ä¸‹ï¼Œä¼˜åŒ–çš„æ€è·¯æ˜¯å…¶ä¸­çš„æ–¹æ³•å…ˆè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ï¼Œæœ€åé›†æˆæˆä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨é¡µé¢è°ƒç”¨çš„æ—¶å€™åªè¦æŠŠåˆå§‹åŒ–æ•°æ®ä¼ å…¥ï¼Œæœ€ååŠ ä¸Šä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œå°†é€‰æ‹©å®Œæˆçš„åœ°å€è¿”å›å›æ¥ï¼Œè¿™æ ·æ•´ä¸ªé¡µé¢ä¹Ÿå‘¢ä¸ªç®€æ´å¾ˆå¤šï¼Œè°ƒç”¨æ–¹æ³•ä¹Ÿç®€å•äº†ï¼Œä½¿ç”¨èµ·æ¥çš„è¯ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚
&#160;&#160;&#160;&#160;å› ä¸ºç›®å‰æˆ‘å†™çš„vueçš„å•é¡µé¢åº”ç”¨ï¼Œç”¨åˆ°keepAliveï¼Œæ‰€ä»¥ç°æœ‰çš„æ§ä»¶æ€»æ˜¯å‡ºé—®é¢˜ï¼Œç­‰è¿™ä¸¤å¤©ä¼˜åŒ–å®Œè¿›è¡Œæµ‹è¯•ä¸‹ï¼Œåˆ°æ—¶å€™åœ¨å†™ä¸€ç¯‡ç®€å•ç‚¹çš„æ–‡ç« å‘å¸ƒå‡ºæ¥ã€‚
&#160;&#160;&#160;&#160;èƒ½çœ‹åˆ°è¿™é‡Œçš„ï¼Œå¤§å®¶è¦æ˜¯æœ‰ä»€ä¹ˆé—®é¢˜çš„å¯ä»¥ç•™è¨€è·Ÿæˆ‘è®¨è®ºè®¨è®ºï¼Œæœ‰å•¥å¥½çš„æƒ³æ³•ä¹Ÿå¯ä»¥è·Ÿæˆ‘æ²Ÿé€šï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ ã€‚

ä»¥ä¸Š















